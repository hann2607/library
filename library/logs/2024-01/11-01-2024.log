2024-01-11 20:48:16,943 INFO o.h.v.i.u.Version [background-preinit] HV000001: Hibernate Validator 8.0.1.Final
2024-01-11 20:48:17,009 INFO o.s.b.StartupInfoLogger [restartedMain] Starting LibraryApplication using Java 17.0.5 with PID 8136 (E:\Project\library\library\target\classes started by HAN-PC in E:\Project\library\library)
2024-01-11 20:48:17,016 DEBUG o.s.b.StartupInfoLogger [restartedMain] Running with Spring Boot v3.2.1, Spring v6.1.2
2024-01-11 20:48:17,019 INFO o.s.b.SpringApplication [restartedMain] The following 1 profile is active: "dev"
2024-01-11 20:48:17,082 INFO o.s.b.l.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-01-11 20:48:17,083 INFO o.s.b.l.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-01-11 20:48:18,757 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Multiple Spring Data modules found, entering strict repository configuration mode
2024-01-11 20:48:18,761 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2024-01-11 20:48:18,821 INFO o.s.d.r.c.RepositoryConfigurationExtensionSupport [restartedMain] Spring Data JDBC - Could not safely identify store assignment for repository candidate interface net.sparkminds.library.repository.AccountRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2024-01-11 20:48:18,822 INFO o.s.d.r.c.RepositoryConfigurationExtensionSupport [restartedMain] Spring Data JDBC - Could not safely identify store assignment for repository candidate interface net.sparkminds.library.repository.AdminRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2024-01-11 20:48:18,823 INFO o.s.d.r.c.RepositoryConfigurationExtensionSupport [restartedMain] Spring Data JDBC - Could not safely identify store assignment for repository candidate interface net.sparkminds.library.repository.RoleRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2024-01-11 20:48:18,827 INFO o.s.d.r.c.RepositoryConfigurationExtensionSupport [restartedMain] Spring Data JDBC - Could not safely identify store assignment for repository candidate interface net.sparkminds.library.repository.SessionRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2024-01-11 20:48:18,830 INFO o.s.d.r.c.RepositoryConfigurationExtensionSupport [restartedMain] Spring Data JDBC - Could not safely identify store assignment for repository candidate interface net.sparkminds.library.repository.UserRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2024-01-11 20:48:18,832 INFO o.s.d.r.c.RepositoryConfigurationExtensionSupport [restartedMain] Spring Data JDBC - Could not safely identify store assignment for repository candidate interface net.sparkminds.library.repository.VerifyRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2024-01-11 20:48:18,835 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 62 ms. Found 0 JDBC repository interfaces.
2024-01-11 20:48:18,851 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Multiple Spring Data modules found, entering strict repository configuration mode
2024-01-11 20:48:18,854 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-11 20:48:18,935 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 76 ms. Found 6 JPA repository interfaces.
2024-01-11 20:48:19,982 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8080 (http)
2024-01-11 20:48:19,999 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8080"]
2024-01-11 20:48:20,006 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-11 20:48:20,008 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.17]
2024-01-11 20:48:20,079 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-11 20:48:20,081 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 2995 ms
2024-01-11 20:48:20,300 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2024-01-11 20:48:20,809 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@5c374573
2024-01-11 20:48:20,811 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2024-01-11 20:48:22,028 INFO l.l.c.JavaLogger [restartedMain] Reading from db_library.databasechangelog
2024-01-11 20:48:22,128 INFO l.l.c.JavaLogger [restartedMain] Database is up to date, no changesets to execute
2024-01-11 20:48:22,133 INFO l.l.c.JavaLogger [restartedMain] Reading from db_library.databasechangelog
2024-01-11 20:48:22,144 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-11 20:48:22,145 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-11 20:48:22,145 INFO l.l.c.JavaLogger [restartedMain] Previously run:               5
2024-01-11 20:48:22,146 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-11 20:48:22,146 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-11 20:48:22,147 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            5
2024-01-11 20:48:22,148 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-11 20:48:22,172 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-11 20:48:22,175 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-11 20:48:22,289 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-11 20:48:22,364 INFO o.h.Version [restartedMain] HHH000412: Hibernate ORM core version 6.4.1.Final
2024-01-11 20:48:22,401 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-11 20:48:22,812 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-11 20:48:24,409 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-11 20:48:24,599 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-01-11 20:48:25,297 DEBUG o.s.w.f.GenericFilterBean [restartedMain] Filter 'jwtFilter' configured for use
2024-01-11 20:48:25,685 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-01-11 20:48:26,136 INFO o.s.s.w.DefaultSecurityFilterChain [restartedMain] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@ef09e6e, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1411c857, org.springframework.security.web.context.SecurityContextHolderFilter@3a0f4f7, org.springframework.security.web.header.HeaderWriterFilter@5b00bebc, org.springframework.security.web.authentication.logout.LogoutFilter@2719098f, net.sparkminds.library.jwt.JwtFilter@5c326701, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f8c50eb, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@529acebc, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@592058d9, org.springframework.security.web.session.SessionManagementFilter@6bf041c5, org.springframework.security.web.access.ExceptionTranslationFilter@3246ea0a, org.springframework.security.web.access.intercept.AuthorizationFilter@51d9645b]
2024-01-11 20:48:26,369 WARN o.s.b.a.t.ThymeleafAutoConfiguration$DefaultTemplateResolverConfiguration [restartedMain] Cannot find template location: classpath:/templates/ (please add some templates, check your Thymeleaf configuration, or set spring.thymeleaf.check-template-location=false)
2024-01-11 20:48:26,801 WARN o.s.b.a.f.FreeMarkerAutoConfiguration [restartedMain] Cannot find template location(s): [classpath:/templates/] (please add some templates, check your FreeMarker configuration, or set spring.freemarker.check-template-location=false)
2024-01-11 20:48:26,849 INFO o.s.b.d.a.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2024-01-11 20:48:26,876 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8080"]
2024-01-11 20:48:26,951 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat started on port 8080 (http) with context path ''
2024-01-11 20:48:26,952 INFO o.s.b.StartupInfoLogger [restartedMain] Started LibraryApplication in 10.578 seconds (process running for 17.314)
2024-01-11 20:49:22,592 INFO o.a.j.l.DirectJDKLog [http-nio-8080-exec-2] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-01-11 20:49:22,592 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-2] Initializing Servlet 'dispatcherServlet'
2024-01-11 20:49:22,601 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-2] Completed initialization in 9 ms
2024-01-11 20:49:23,127 WARN o.s.w.s.h.AbstractHandlerExceptionResolver [http-nio-8080-exec-2] Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<net.sparkminds.library.dto.register.RegisterRequest> net.sparkminds.library.restcontroller.common.RegisterRestController.registerAccount(net.sparkminds.library.dto.register.RegisterRequest) with 4 errors: [Field error in object 'registerRequest' on field 'lastname': rejected value [null]; codes [NotBlank.registerRequest.lastname,NotBlank.lastname,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [registerRequest.lastname,lastname]; arguments []; default message [lastname]]; default message [Please fill the last name]] [Field error in object 'registerRequest' on field 'password': rejected value [12345]; codes [Length.registerRequest.password,Length.password,Length.java.lang.String,Length]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [registerRequest.password,password]; arguments []; default message [password],32,8]; default message [Password must be greater than 8 and less than 32 characters]] [Field error in object 'registerRequest' on field 'phone': rejected value [033456334]; codes [ValidPhoneNumber.registerRequest.phone,ValidPhoneNumber.phone,ValidPhoneNumber.java.lang.String,ValidPhoneNumber]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [registerRequest.phone,phone]; arguments []; default message [phone],VN]; default message [Invalid phone number]] [Field error in object 'registerRequest' on field 'email': rejected value [user123@]; codes [Email.registerRequest.email,Email.email,Email.java.lang.String,Email]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [registerRequest.email,email]; arguments []; default message [email],[Ljakarta.validation.constraints.Pattern$Flag;@579038bb,.*]; default message [Email is invalid]] ]
2024-01-11 20:49:59,570 WARN o.s.w.s.h.AbstractHandlerExceptionResolver [http-nio-8080-exec-4] Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<net.sparkminds.library.dto.register.RegisterRequest> net.sparkminds.library.restcontroller.common.RegisterRestController.registerAccount(net.sparkminds.library.dto.register.RegisterRequest) with 4 errors: [Field error in object 'registerRequest' on field 'password': rejected value [12345]; codes [Length.registerRequest.password,Length.password,Length.java.lang.String,Length]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [registerRequest.password,password]; arguments []; default message [password],32,8]; default message [Password must be greater than 8 and less than 32 characters]] [Field error in object 'registerRequest' on field 'phone': rejected value [033456334]; codes [ValidPhoneNumber.registerRequest.phone,ValidPhoneNumber.phone,ValidPhoneNumber.java.lang.String,ValidPhoneNumber]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [registerRequest.phone,phone]; arguments []; default message [phone],VN]; default message [Invalid phone number]] [Field error in object 'registerRequest' on field 'email': rejected value [user123@]; codes [Email.registerRequest.email,Email.email,Email.java.lang.String,Email]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [registerRequest.email,email]; arguments []; default message [email],[Ljakarta.validation.constraints.Pattern$Flag;@579038bb,.*]; default message [Email is invalid]] [Field error in object 'registerRequest' on field 'lastname': rejected value [null]; codes [NotBlank.registerRequest.lastname,NotBlank.lastname,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [registerRequest.lastname,lastname]; arguments []; default message [lastname]]; default message [Please fill the last name]] ]
2024-01-11 20:50:51,970 INFO n.s.l.s.i.UserServiceImpl [http-nio-8080-exec-6] Insert User Successfully: Account [id=30, email=kumakazuo001@gmail.com, password=$2a$10$7IDhLELTRSDqd.8GN/qYvuwzU5Ju2d0AZbIye2WYTiY1duXWBRFxu, blockedAt=null, reasonBlocked=null, isVerify=false, status=ACTIVE]
2024-01-11 20:50:56,925 INFO n.s.l.s.i.VerifyServiceImpl [http-nio-8080-exec-6] Insert Verify Successfully: Verify [id=33, link=http://localhost:8080/api/v1/common/register/verify/link/412167, otp=412167, expirationTime=2024-01-11T20:55:56.895327800, typeOTP=REGISTER]
2024-01-11 20:52:35,321 INFO n.s.l.s.i.VerifyServiceImpl [http-nio-8080-exec-9] Find Verify by otp success: 412167
2024-01-11 20:52:35,330 ERROR n.s.l.s.i.RegisterServiceImpl [http-nio-8080-exec-9] expired otp!
2024-01-11 20:52:35,340 WARN o.s.w.s.h.AbstractHandlerExceptionResolver [http-nio-8080-exec-9] Resolved [net.sparkminds.library.exception.RequestException: expired otp!]
2024-01-11 20:52:53,921 INFO n.s.l.s.i.VerifyServiceImpl [http-nio-8080-exec-10] Find Verify by otp success: 412167
2024-01-11 20:52:53,930 ERROR n.s.l.s.i.RegisterServiceImpl [http-nio-8080-exec-10] expired link!
2024-01-11 20:52:53,937 WARN o.s.w.s.h.AbstractHandlerExceptionResolver [http-nio-8080-exec-10] Resolved [net.sparkminds.library.exception.RequestException: expired link!]
2024-01-11 20:53:15,107 INFO n.s.l.s.i.UserServiceImpl [http-nio-8080-exec-3] Find User by email successfully: Account [id=30, email=kumakazuo001@gmail.com, password=$2a$10$7IDhLELTRSDqd.8GN/qYvuwzU5Ju2d0AZbIye2WYTiY1duXWBRFxu, blockedAt=null, reasonBlocked=null, isVerify=false, status=ACTIVE]
2024-01-11 20:53:15,110 INFO n.s.l.s.i.AccountServiceImpl [http-nio-8080-exec-3] Find Account by email Successfully
2024-01-11 20:53:15,177 INFO n.s.l.s.i.VerifyServiceImpl [http-nio-8080-exec-3] Find Verify by account Id success: 30
2024-01-11 20:53:15,180 INFO n.s.l.s.i.VerifyServiceImpl [http-nio-8080-exec-3] Insert Verify Successfully: Verify [id=33, link=http://localhost:8080/api/v1/common/register/verify/link/635543, otp=635543, expirationTime=2024-01-11T20:58:15.100153700, typeOTP=REGISTER]
2024-01-11 20:53:19,133 INFO n.s.l.s.i.RegisterServiceImpl [http-nio-8080-exec-3] Resend OTP and link successfully
2024-01-11 20:53:39,622 INFO n.s.l.s.i.VerifyServiceImpl [http-nio-8080-exec-4] Find Verify by otp success: 635543
2024-01-11 20:53:39,640 INFO n.s.l.s.i.UserServiceImpl [http-nio-8080-exec-4] Find User by id successfully: Account [id=30, email=kumakazuo001@gmail.com, password=$2a$10$7IDhLELTRSDqd.8GN/qYvuwzU5Ju2d0AZbIye2WYTiY1duXWBRFxu, blockedAt=null, reasonBlocked=null, isVerify=false, status=ACTIVE]
2024-01-11 20:53:39,640 INFO n.s.l.s.i.UserServiceImpl [http-nio-8080-exec-4] Insert User Successfully: Account [id=30, email=kumakazuo001@gmail.com, password=$2a$10$7IDhLELTRSDqd.8GN/qYvuwzU5Ju2d0AZbIye2WYTiY1duXWBRFxu, blockedAt=null, reasonBlocked=null, isVerify=true, status=ACTIVE]
2024-01-11 20:53:39,650 INFO n.s.l.s.i.VerifyServiceImpl [http-nio-8080-exec-4] Delete Verify Successfully: 33
2024-01-11 20:54:27,785 INFO o.s.b.a.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin [RMI TCP Connection(9)-127.0.0.1] Application shutdown requested.
2024-01-11 20:54:27,793 INFO o.a.j.l.DirectJDKLog [RMI TCP Connection(9)-127.0.0.1] Stopping ProtocolHandler ["http-nio-8080"]
2024-01-11 20:54:27,812 INFO o.s.o.j.AbstractEntityManagerFactoryBean [RMI TCP Connection(9)-127.0.0.1] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-01-11 20:54:27,825 INFO c.z.h.HikariDataSource [RMI TCP Connection(9)-127.0.0.1] HikariPool-1 - Shutdown initiated...
2024-01-11 20:54:27,891 INFO c.z.h.HikariDataSource [RMI TCP Connection(9)-127.0.0.1] HikariPool-1 - Shutdown completed.
